<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Unit files</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,4,png,sections+,fn-in --> 
<meta name="src" content="user.tex"> 
<meta name="date" content="2017-09-28 14:24:00"> 
<link rel="stylesheet" type="text/css" href="user.css"> 
</head><body 
>
<!--l. 534--><div class="crosslinks"><p class="noindent">[<a 
href="usersu8.html" >next</a>] [<a 
href="usersu6.html" >prev</a>] [<a 
href="usersu6.html#tailusersu6.html" >prev-tail</a>] [<a 
href="#tailusersu7.html">tail</a>] [<a 
href="userse9.html#usersu7.html" >up</a>] </p></div>
<h4 class="subsectionHead"><span class="titlemark">3.1.2   </span> <a 
href="user.html#QQ2-21-30" id="x21-280003.1.2">Unit files</a></h4>
<!--l. 537--><p class="noindent" >When you compile a unit or program that needs other units, the compiler will look for compiled
versions of these units in the following way:
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x21-28002x1">It will look in the current directory.
     </li>
     <li 
  class="enumerate" id="x21-28004x2">It will look in the directory where the source file resides.
     </li>
     <li 
  class="enumerate" id="x21-28006x3">It will look in the directory where the compiler binary is.
     </li>
     <li 
  class="enumerate" id="x21-28008x4">It will look in all the directories specified in the unit search path.</li></ol>
<!--l. 546--><p class="noindent" >You can add a directory to the unit search path with the (<span 
class="cmtt-10">-Fu </span>(see page <a 
href="usersu14.html#x37-440005.1.3">107<!--tex4ht:ref: option:Fu --></a>)) option. Every
occurrence of one of these options will <span 
class="cmti-10">insert </span>a directory to the unit search path. i.e. the last path
on the command line will be searched first.
<!--l. 551--><p class="noindent" >The compiler adds several paths to the unit search path:
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x21-28010x1">The contents of the environment variable <span 
class="cmtt-10">XXUNITS</span>, where <span 
class="cmtt-10">XX </span>must be replaced with one
     of the supported targets: <span 
class="cmtt-10">GO32V2</span>, <span 
class="cmtt-10">LINUX</span>,<span 
class="cmtt-10">WIN32</span>, <span 
class="cmtt-10">OS2</span>, <span 
class="cmtt-10">BEOS</span>, <span 
class="cmtt-10">FREEBSD</span>, <span 
class="cmtt-10">SUNOS</span>, <span 
class="cmtt-10">DARWIN</span>
     (the actual list depends on the available targets).
     </li>
     <li 
  class="enumerate" id="x21-28012x2">The standard unit directory. This directory is determined from the <span 
class="cmtt-10">FPCDIR </span>environment
     variable. If this variable is not set, then it is defaulted to the following:
         <ul class="itemize1">
         <li class="itemize">On <span 
class="cmcsc-10"><span 
class="small-caps">l</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">u</span><span 
class="small-caps">x</span></span>:
                                                                            

                                                                            
         <div class="verbatim" id="verbatim-17">
         &#x00A0;&#x00A0;/usr/local/lib/fpc/FPCVERSION
         &#x00A0;<br />or
         &#x00A0;<br />&#x00A0;&#x00A0;/usr/lib/fpc/FPCVERSION
</div>
         <!--l. 566--><p class="nopar" >whichever is found first.
         </li>
         <li class="itemize">On other OSes: the compiler binary directory, with &#8217;../&#8217; appended to it, if it exists. For
         instance, on Windows, this would mean
                                                                            

                                                                            
         <div class="verbatim" id="verbatim-18">
         C:\FPC\2.6\units\i386-win32
</div>
         <!--l. 572--><p class="nopar" >This is assuming the compiler was installed in the directory
                                                                            

                                                                            
         <div class="verbatim" id="verbatim-19">
         C:\FPC\2.6
</div>
         <!--l. 576--><p class="nopar" ></li></ul>
     <!--l. 578--><p class="noindent" >After this directory is determined, the following paths are added to the search
     path:
         <ol  class="enumerate2" >
         <li 
  class="enumerate" id="x21-28014x1">FPCDIR/units/FPCTARGET
         </li>
         <li 
  class="enumerate" id="x21-28016x2">FPCDIR/units/FPCTARGET/rtl</li></ol>
     <!--l. 584--><p class="noindent" >Here target must be replaced by the name of the target you are compiling for: this is a
     combination of CPU and OS, so for instance
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-20">
     /usr/local/lib/fpc/2.6/units/i386-linux/
</div>
     <!--l. 588--><p class="nopar" >or, when cross-compiling
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-21">
     /usr/local/lib/fpc/2.6/units/i386-win32/
</div>
     <!--l. 592--><p class="nopar" ></li></ol>
<!--l. 595--><p class="noindent" >The <span 
class="cmtt-10">-Fu </span>option accepts a single <span 
class="cmtt-10">* </span>wildcard, which will be replaced by all directories found on that
location, but <span 
class="cmti-10">not </span>the location itself. For example, given the directories
                                                                            

                                                                            
<div class="verbatim" id="verbatim-22">
rtl/units/i386-linux
&#x00A0;<br />fcl/units/i386-linux
&#x00A0;<br />packages/base
&#x00A0;<br />packages/extra
</div>
<!--l. 604--><p class="nopar" >the command
                                                                            

                                                                            
<div class="verbatim" id="verbatim-23">
fpc&#x00A0;-Fu"*/units/i386-linux"
</div>
<!--l. 608--><p class="nopar" >will have the same effect as
                                                                            

                                                                            
<div class="verbatim" id="verbatim-24">
fpc&#x00A0;-Furtl/units/i386-linux&#x00A0;-Fufcl/units/i386-linux
</div>
<!--l. 612--><p class="nopar" >since both the <span 
class="cmss-10">rtl </span>and <span 
class="cmss-10">fcl </span>directories contain further <span 
class="cmss-10">units/i386-linux </span>subdirectories. The packages
directory will not be added, since it doesn&#8217;t contain a <span 
class="cmss-10">units/i386-linux </span>subdirectory.
<!--l. 617--><p class="noindent" >The following command
                                                                            

                                                                            
<div class="verbatim" id="verbatim-25">
fpc&#x00A0;-Fu"units/i386-linux/*"
</div>
<!--l. 620--><p class="nopar" >will match any directory below the <span 
class="cmss-10">units/i386-linux </span>directory, but will not match the
<span 
class="cmss-10">units/i386-linux </span>directory itself, so you should add it manually if you want the compiler to look for
files in this directory as well:
                                                                            

                                                                            
<div class="verbatim" id="verbatim-26">
fpc&#x00A0;-Fu"units/i386-linux"&#x00A0;-Fu"units/i386-linux/*"
</div>
<!--l. 627--><p class="nopar" >
<!--l. 629--><p class="noindent" >Note that (for optimization) the compiler will drop any non-existing paths from the search path,
i.e. the existence of the path (after wildcard and environment variable expansion) will be
tested.
<!--l. 633--><p class="noindent" >You can see what paths the compiler will search by giving the compiler the <span 
class="cmtt-10">-vu </span>option.
<!--l. 636--><p class="noindent" >Note that unit file paths specified in a config file will be added at the end, while paths specified on
the command-line are added at the beginning.
<!--l. 639--><p class="noindent" >Imagine the following command-line:
                                                                            

                                                                            
<div class="verbatim" id="verbatim-27">
fpc&#x00A0;-n&#x00A0;-Fu/home&#x00A0;@cfg&#x00A0;&#x00A0;-Fu/usr&#x00A0;foo.pp
</div>
<!--l. 642--><p class="nopar" >Where the file <span 
class="cmss-10">cfg </span>has the following contents:
                                                                            

                                                                            
<div class="verbatim" id="verbatim-28">
-Fu/etc
</div>
<!--l. 646--><p class="nopar" >This will result in the following search path
                                                                            

                                                                            
<div class="verbatim" id="verbatim-29">
Using&#x00A0;unit&#x00A0;path:&#x00A0;/home/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/usr/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/etc/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/data/FPC/installed/3.1.1/
</div>
<!--l. 653--><p class="nopar" >Reverting the order of the files on the command-line :
                                                                            

                                                                            
<div class="verbatim" id="verbatim-30">
fpc&#x00A0;-n&#x00A0;-Fu/usr&#x00A0;@cfg&#x00A0;&#x00A0;-Fu/home&#x00A0;foo.pp
</div>
<!--l. 657--><p class="nopar" >Results in
                                                                            

                                                                            
<div class="verbatim" id="verbatim-31">
Using&#x00A0;unit&#x00A0;path:&#x00A0;/usr/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/home/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/etc/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/data/FPC/installed/3.1.1/
</div>
<!--l. 664--><p class="nopar" >Moving the position of <span 
class="cmtt-10">@cfg </span>will not change the path:
                                                                            

                                                                            
<div class="verbatim" id="verbatim-32">
fpc&#x00A0;-n&#x00A0;@cfg&#x00A0;-Fu/home&#x00A0;&#x00A0;-Fu/usr&#x00A0;foo.pp
</div>
<!--l. 668--><p class="nopar" >Results in
                                                                            

                                                                            
<div class="verbatim" id="verbatim-33">
Using&#x00A0;unit&#x00A0;path:&#x00A0;/home/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/usr/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/etc/
&#x00A0;<br />Using&#x00A0;unit&#x00A0;path:&#x00A0;/data/FPC/installed/3.1.1/
</div>
<!--l. 675--><p class="nopar" >
<!--l. 677--><p class="noindent" >On systems where filenames are case sensitive (such as <span 
class="cmcsc-10"><span 
class="small-caps">u</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">x</span> </span>and <span 
class="cmcsc-10"><span 
class="small-caps">l</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">u</span><span 
class="small-caps">x</span></span>), the compiler will
:
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x21-28018x1">Search for the original file name, i.e. preserves case.
     </li>
     <li 
  class="enumerate" id="x21-28020x2">Search for the filename all lowercased.
     </li>
     <li 
  class="enumerate" id="x21-28022x3">Search for the filename all uppercased.</li></ol>
<!--l. 684--><p class="noindent" >This is necessary, since Pascal is case-independent, and the statements <span 
class="cmtt-10">Uses Unit1; </span>or <span 
class="cmtt-10">uses</span>
<span 
class="cmtt-10">unit1; </span>should have the same effect.
<!--l. 687--><p class="noindent" >It will do this first with the extension <span 
class="cmss-10">.ppu </span>(the compiled unit), <span 
class="cmss-10">.pp </span>and then with the extension
<span 
class="cmss-10">.pas</span>.
<!--l. 690--><p class="noindent" >For instance, suppose that the file <span 
class="cmss-10">foo.pp </span>needs the unit <span 
class="cmss-10">bar</span>. Then the command
                                                                            

                                                                            
<div class="verbatim" id="verbatim-34">
fpc&#x00A0;-Fu..&#x00A0;-Fuunits&#x00A0;foo.pp
</div>
<!--l. 694--><p class="nopar" >will tell the compiler to look for the unit <span 
class="cmss-10">bar </span>in the following places:
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x21-28024x1">In the current directory.
     </li>
     <li 
  class="enumerate" id="x21-28026x2">In the directory where the compiler binary is (not under <span 
class="cmcsc-10"><span 
class="small-caps">l</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">u</span><span 
class="small-caps">x</span></span>).
     </li>
     <li 
  class="enumerate" id="x21-28028x3">In the parent directory of the current directory.
     </li>
     <li 
  class="enumerate" id="x21-28030x4">In the subdirectory <span 
class="cmss-10">units </span>of the current directory
     </li>
     <li 
  class="enumerate" id="x21-28032x5">In the standard unit directory.</li></ol>
<!--l. 706--><p class="noindent" >Also, unit names that are longer than 8 characters will first be looked for with their
full length. If the unit is not found with this name, the name will be truncated to 8
characters, and the compiler will look again in the same directories, but with the truncated
name.
<!--l. 712--><p class="noindent" >If the compiler finds the unit it needs, it will look for the source file of this unit in the same
directory where it found the unit. If it finds the source of the unit, then it will compare the file
times. If the source file was modified more recent than the unit file, the compiler will attempt to
recompile the unit with this source file.
<!--l. 718--><p class="noindent" >If the compiler doesn&#8217;t find a compiled version of the unit, or when the <span 
class="cmtt-10">-B </span>option is specified, then
the compiler will look in the same manner for the unit source file, and attempt to recompile
it.
<!--l. 722--><p class="noindent" >It is recommended to set the unit search path in the configuration file <span 
class="cmss-10">fpc.cfg</span>. If you do this, you
don&#8217;t need to specify the unit search path on the command line every time you want to compile
something.
                                                                            

                                                                            
<!--l. 727--><div class="crosslinks"><p class="noindent">[<a 
href="usersu8.html" >next</a>] [<a 
href="usersu6.html" >prev</a>] [<a 
href="usersu6.html#tailusersu6.html" >prev-tail</a>] [<a 
href="usersu7.html" >front</a>] [<a 
href="userse9.html#usersu7.html" >up</a>] </p></div>
<!--l. 727--><p class="noindent" ><a 
 id="tailusersu7.html"></a>  
</body></html> 
