<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>semop</title>
<link rel="stylesheet" href="../fpdoc.css" type="text/css">

</head>
<body>
<table class="bar" width="100%" border="0" cellpadding="4" cellspacing="0">
<tr>
<td><b>[<a href="../ipc/index.html">Overview</a>][<a href="../ipc/index-2.html">Constants</a>][<a href="../ipc/index-3.html">Types</a>][<a href="../ipc/index-5.html">Procedures and functions</a>][<a href="../ipc/index-8.html">Index</a>]</b></td>
<td align="right"><span class="bartitle">Reference for unit 'ipc' (<a href="../index.html">#rtl</a>)</span></td>
</tr>
</table>
<h1>semop</h1>
<p>Perform semaphore operation.</p>
<h2>Declaration</h2>
<p>Source position: ipc.pp line 861</p>
<table cellpadding="0" cellspacing="0">
<tr>
<td><p><tt><span class="code"><span class="kw">function</span> semop<span class="sym">(</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;semid<span class="sym">: </span><a href="../unixtype/cint.html">cint</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;sops<span class="sym">: </span><a href="../ipc/psembuf.html">PSEMbuf</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;nsops<span class="sym">: </span><a href="../unixtype/cuint.html">cuint</a></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code"><span class="sym">):</span><a href="../unixtype/cint.html">cint</a><span class="sym">;</span></span></tt></p></td>
</tr>
</table>
<h2>Description</h2>
<p><var>semop</var> performs a set of operations on a message queue. <var>sops</var> points to an array of type <var>TSEMbuf</var>. The array should contain <var>nsops</var> elements. </p>
<p>The fields of the <a href="../ipc/tsembuf.html">TSEMbuf</a> structure  </p>
<pre>TSEMbuf <span class="sym">=</span> <span class="kw">record</span>
    sem_num <span class="sym">:</span> word<span class="sym">;</span>
    sem_op  <span class="sym">:</span> integer<span class="sym">;</span>
    sem_flg <span class="sym">:</span> integer<span class="sym">;</span>
</pre>
<p>should be filled as follows: </p>
<dl>
<dt>sem_num</dt>
<dd>The number of the semaphore in the set on which the operation must be performed.</dd>
<dt>sem_op</dt>
<dd>The operation to be performed. The operation depends on the sign of <var>sem_op</var>: A positive  number is simply added to the current value of the semaphore. If 0 (zero) is specified, then the process is suspended until the  specified semaphore reaches zero. If a negative number is specified, it is substracted from the current value of the semaphore. If the value would become negative then the process is suspended until the value becomes big enough, unless <var>IPC_NOWAIT</var> is specified in the <var>sem_flg</var>. </dd>
<dt>sem_flg</dt>
<dd>Optional flags: if <var>IPC_NOWAIT</var> is specified, then the calling process will never be suspended. </dd>
</dl>
<p>The function returns <var>True</var> if the operations were successful, <var>False</var> otherwise. </p>
<h2>Errors</h2>
<p>In case of error, <var>False</var> is returned, and <var>IPCerror</var> is set. </p>
<h2>See also</h2>
<table cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><p><a href="../ipc/semget.html">semget</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Return the ID of a semaphore set, possibly creating the set</p></td>
</tr>
<tr>
<td valign="top"><p><a href="../ipc/semctl.html">semctl</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Perform various control operations on a semaphore set</p></td>
</tr>
</table>
<hr>

<span class="footer">Documentation generated on: Sep 28 2017</span>
</body>
</html>
