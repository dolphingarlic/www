<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>FileCreate</title>
<link rel="stylesheet" href="../fpdoc.css" type="text/css">

</head>
<body>
<table class="bar" width="100%" border="0" cellpadding="4" cellspacing="0">
<tr>
<td><b>[<a href="../sysutils/index.html">Overview</a>][<a href="../sysutils/index-2.html">Constants</a>][<a href="../sysutils/index-3.html">Types</a>][<a href="../sysutils/index-4.html">Classes</a>][<a href="../sysutils/index-5.html">Procedures and functions</a>][<a href="../sysutils/index-6.html">Variables</a>][<a href="../sysutils/index-8.html">Index</a>]</b></td>
<td align="right"><span class="bartitle">Reference for unit 'sysutils' (<a href="../index.html">#rtl</a>)</span></td>
</tr>
</table>
<h1>FileCreate</h1>
<p>Create a new file and return a handle to it.</p>
<h2>Declaration</h2>
<p>Source position: filutilh.inc line 124</p>
<table cellpadding="0" cellspacing="0">
<tr>
<td><p><tt><span class="code"><span class="kw">function</span> FileCreate<span class="sym">(</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;<span class="kw">const </span>FileName<span class="sym">: </span><a href="../system/unicodestring.html">UnicodeString</a></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code"><span class="sym">):</span><a href="../sysutils/thandle.html">THandle</a><span class="sym">;</span><br><br><span class="kw">function</span> FileCreate<span class="sym">(</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;<span class="kw">const </span>FileName<span class="sym">: </span><a href="../system/unicodestring.html">UnicodeString</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;Rights<span class="sym">: </span><a href="../system/integer.html">Integer</a></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code"><span class="sym">):</span><a href="../sysutils/thandle.html">THandle</a><span class="sym">;</span><br><br><span class="kw">function</span> FileCreate<span class="sym">(</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;<span class="kw">const </span>FileName<span class="sym">: </span><a href="../system/unicodestring.html">UnicodeString</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;ShareMode<span class="sym">: </span><a href="../system/integer.html">Integer</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;Rights<span class="sym">: </span><a href="../system/integer.html">Integer</a></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code"><span class="sym">):</span><a href="../sysutils/thandle.html">THandle</a><span class="sym">;</span><br><br><span class="kw">function</span> FileCreate<span class="sym">(</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;<span class="kw">const </span>FileName<span class="sym">: </span><a href="../system/rawbytestring.html">RawByteString</a></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code"><span class="sym">):</span><a href="../sysutils/thandle.html">THandle</a><span class="sym">;</span><br><br><span class="kw">function</span> FileCreate<span class="sym">(</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;<span class="kw">const </span>FileName<span class="sym">: </span><a href="../system/rawbytestring.html">RawByteString</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;Rights<span class="sym">: </span><a href="../system/integer.html">Integer</a></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code"><span class="sym">):</span><a href="../sysutils/thandle.html">THandle</a><span class="sym">;</span><br><br><span class="kw">function</span> FileCreate<span class="sym">(</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;<span class="kw">const </span>FileName<span class="sym">: </span><a href="../system/rawbytestring.html">RawByteString</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;ShareMode<span class="sym">: </span><a href="../system/integer.html">Integer</a><span class="sym">;</span></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code">&nbsp;&nbsp;Rights<span class="sym">: </span><a href="../system/integer.html">Integer</a></span></tt></p></td>
</tr>
<tr>
<td><p><tt><span class="code"><span class="sym">):</span><a href="../sysutils/thandle.html">THandle</a><span class="sym">;</span></span></tt></p></td>
</tr>
</table>
<h2>Description</h2>
<p><var>FileCreate</var> creates a new file with name <var>FileName</var> on the disk and returns a file handle which can be used to read or write from the file with the <a href="../sysutils/fileread.html">FileRead</a> and <a href="../sysutils/filewrite.html">FileWrite</a> functions. </p>
<p>If a file with name <var>FileName</var> already existed on the disk, it is overwritten. </p>
<p>The optional <var>Mode</var> parameter only has an effect under unix, where it can be used to set the mode (read, write, execute, sticky bit, setgid and setuid flags) of the created file to the specified custom value. On other platfors, the <var>Mode</var> parameter is ignored. </p>
<h2>Errors</h2>
<p>If an error occurs (e.g. disk full or non-existent path), the function returns <var>THandle(-1)</var>. </p>
<h2>See also</h2>
<table cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><p><a href="../sysutils/fileclose.html">FileClose</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Close a file handle.</p></td>
</tr>
<tr>
<td valign="top"><p><a href="../sysutils/filewrite.html">FileWrite</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Write data from a buffer to a given filehandle.</p></td>
</tr>
<tr>
<td valign="top"><p><a href="../sysutils/fileopen.html">FileOpen</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Open an existing file and return a filehandle</p></td>
</tr>
<tr>
<td valign="top"><p><a href="../sysutils/fileread.html">FileRead</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Read data from a filehandle in a buffer.</p></td>
</tr>
<tr>
<td valign="top"><p><a href="../sysutils/filetruncate.html">FileTruncate</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Truncate an open file to a given size.</p></td>
</tr>
<tr>
<td valign="top"><p><a href="../sysutils/fileseek.html">FileSeek</a></p></td>
<td><p>&nbsp;&nbsp;</p></td>
<td><p class="cmt">Set the current file position on a file handle.</p></td>
</tr>
</table>
<h2>Example</h2>
<pre><span class="kw">Program</span> Example37<span class="sym">;</span>

<span class="cmt">{ This program demonstrates the FileCreate/FileSeek/FileReed/FileTruncate functions }</span>

<span class="kw">Uses</span> sysutils<span class="sym">;</span>

<span class="kw">Var</span> I<span class="sym">,</span>J<span class="sym">,</span>F <span class="sym">:</span> Longint<span class="sym">;</span>

<span class="kw">Begin</span>
  F<span class="sym">:=</span>FileCreate <span class="sym">(</span><span class="str">'test.dat'</span><span class="sym">)</span><span class="sym">;</span>
  <span class="kw">If</span> F<span class="sym">=</span><span class="sym">-</span><span class="num">1</span> <span class="kw">then</span>
    Halt<span class="sym">(</span><span class="num">1</span><span class="sym">)</span><span class="sym">;</span>
  <span class="kw">For</span> I<span class="sym">:=</span><span class="num">0</span> to <span class="num">100</span> <span class="kw">do</span>
    FileWrite<span class="sym">(</span>F<span class="sym">,</span>I<span class="sym">,</span>SizeOf<span class="sym">(</span>i<span class="sym">)</span><span class="sym">)</span><span class="sym">;</span>
  FileClose<span class="sym">(</span>f<span class="sym">)</span><span class="sym">;</span>
  F<span class="sym">:=</span>FileOpen <span class="sym">(</span><span class="str">'test.dat'</span><span class="sym">,</span>fmOpenRead<span class="sym">)</span><span class="sym">;</span>
  <span class="kw">For</span> I<span class="sym">:=</span><span class="num">0</span> to <span class="num">100</span> <span class="kw">do</span>
    <span class="kw">begin</span>
    FileRead <span class="sym">(</span>F<span class="sym">,</span>J<span class="sym">,</span>SizeOF<span class="sym">(</span>J<span class="sym">)</span><span class="sym">)</span><span class="sym">;</span>
    <span class="kw">If</span> J<span class="sym">&lt;</span><span class="sym">&gt;</span>I <span class="kw">then</span>
      Writeln <span class="sym">(</span><span class="str">'Mismatch at file position '</span><span class="sym">,</span>I<span class="sym">)</span>
    <span class="kw">end</span><span class="sym">;</span>
  FileSeek<span class="sym">(</span>F<span class="sym">,</span><span class="num">0</span><span class="sym">,</span>fsFromBeginning<span class="sym">)</span><span class="sym">;</span>
  Randomize<span class="sym">;</span>
  <span class="kw">Repeat</span>
    FileSeek<span class="sym">(</span>F<span class="sym">,</span>Random<span class="sym">(</span><span class="num">100</span><span class="sym">)</span><span class="sym">*</span><span class="num">4</span><span class="sym">,</span>fsFromBeginning<span class="sym">)</span><span class="sym">;</span>
    FileRead <span class="sym">(</span>F<span class="sym">,</span>J<span class="sym">,</span>SizeOf<span class="sym">(</span>J<span class="sym">)</span><span class="sym">)</span><span class="sym">;</span>
    Writeln <span class="sym">(</span><span class="str">'Random read : '</span><span class="sym">,</span>j<span class="sym">)</span><span class="sym">;</span>
  <span class="kw">Until</span> J<span class="sym">&gt;</span><span class="num">80</span><span class="sym">;</span>
  FileClose<span class="sym">(</span>F<span class="sym">)</span><span class="sym">;</span>
  F<span class="sym">:=</span>FileOpen<span class="sym">(</span><span class="str">'test.dat'</span><span class="sym">,</span>fmOpenWrite<span class="sym">)</span><span class="sym">;</span>
  I<span class="sym">:=</span><span class="num">50</span><span class="sym">*</span>SizeOf<span class="sym">(</span>Longint<span class="sym">)</span><span class="sym">;</span>
  <span class="kw">If</span> FileTruncate<span class="sym">(</span>F<span class="sym">,</span>I<span class="sym">)</span> <span class="kw">then</span>
    Writeln<span class="sym">(</span><span class="str">'SuccessFully truncated file to '</span><span class="sym">,</span>I<span class="sym">,</span><span class="str">' bytes.'</span><span class="sym">)</span><span class="sym">;</span>
  FileClose<span class="sym">(</span>F<span class="sym">)</span><span class="sym">;</span>
<span class="kw">End</span><span class="sym">.</span>
</pre>
<hr>

<span class="footer">Documentation generated on: Sep 28 2017</span>
</body>
</html>
