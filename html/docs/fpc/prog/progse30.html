<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Using smart linking</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,4,png,sections+,fn-in --> 
<meta name="src" content="prog.tex"> 
<meta name="date" content="2017-09-28 14:25:00"> 
<link rel="stylesheet" type="text/css" href="prog.css"> 
</head><body 
>
<!--l. 4836--><div class="crosslinks"><p class="noindent">[<a 
href="progse29.html" >prev</a>] [<a 
href="progse29.html#tailprogse29.html" >prev-tail</a>] [<a 
href="#tailprogse30.html">tail</a>] [<a 
href="progch7.html#progse30.html" >up</a>] </p></div>
<h3 class="sectionHead"><span class="titlemark">7.3   </span> <a 
href="prog.html#QQ2-195-208" id="x195-2000007.3">Using smart linking</a></h3>
<!--l. 4839--><p class="noindent" >You can compile your units using smart linking. When you use smartlinking, the compiler creates a
series of code blocks that are as small as possible, i.e. a code block will contain only the code for
one procedure or function.
<!--l. 4843--><p class="noindent" >When you compile a program that uses a smart-linked unit, the compiler will only link in the code
that you actually need, and will leave out all other code. This will result in a smaller binary, which
is loaded in memory faster, thus speeding up execution.
<!--l. 4848--><p class="noindent" >To enable smartlinking, one can give the smartlink option on the command line: <span 
class="cmtt-10">-CX</span>, or one can
put the <span 
class="cmsy-10">{</span><span 
class="cmtt-10">$SMARTLINK ON</span><span 
class="cmsy-10">} </span>directive in the unit file:
                                                                            

                                                                            
<div class="verbatim" id="verbatim-210">
Unit&#x00A0;Testunit
&#x00A0;<br />
&#x00A0;<br />{SMARTLINK&#x00A0;ON}
&#x00A0;<br />Interface
&#x00A0;<br />...
</div>
<!--l. 4857--><p class="nopar" >Smartlinking will slow down the compilation process, especially for large units.
<!--l. 4861--><p class="noindent" >When a unit <span 
class="cmss-10">foo.pp </span>is smartlinked, the name of the code file is changed to <span 
class="cmss-10">libfoo.a</span>.
<!--l. 4864--><p class="noindent" >Technically speaking, the compiler makes small assembler files for each procedure and function in
the unit, as well as for all global defined variables (whether they&#8217;re in the interface section or not).
It then assembles all these small files, and uses <span 
class="cmss-10">ar </span>to collect the resulting object files in one
archive.
<!--l. 4870--><p class="noindent" >Smartlinking and the creation of shared (or dynamic) libraries are mutually exclusive, that is, if
you turn on smartlinking, then the creation of shared libraries is turned of. The creation of
static libraries is still possible. The reason for this is that it has little sense in making a
smartlinked dynamical library. The whole shared library is loaded into memory anyway by the
dynamic linker (or the operating system), so there would be no gain in size by making it
smartlinked.
                                                                            

                                                                            
<!--l. 4884--><div class="crosslinks"><p class="noindent">[<a 
href="progse29.html" >prev</a>] [<a 
href="progse29.html#tailprogse29.html" >prev-tail</a>] [<a 
href="progse30.html" >front</a>] [<a 
href="progch7.html#progse30.html" >up</a>] </p></div>
<!--l. 4884--><p class="noindent" ><a 
 id="tailprogse30.html"></a>  
</body></html> 
