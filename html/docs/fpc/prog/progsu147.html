<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Declaring external functions or procedures</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,4,png,sections+,fn-in --> 
<meta name="src" content="prog.tex"> 
<meta name="date" content="2017-09-28 14:25:00"> 
<link rel="stylesheet" type="text/css" href="prog.css"> 
</head><body 
>
<!--l. 4379--><div class="crosslinks"><p class="noindent">[<a 
href="progsu148.html" >next</a>] [<a 
href="#tailprogsu147.html">tail</a>] [<a 
href="progse28.html#progsu147.html" >up</a>] </p></div>
<h4 class="subsectionHead"><span class="titlemark">7.1.1   </span> <a 
href="prog.html#QQ2-186-197" id="x186-1890007.1.1">Declaring external functions or procedures</a></h4>
<!--l. 4382--><p class="noindent" >The first step in using external code blocks is declaring the function you want to use. Free Pascal
supports Delphi syntax, i.e. you must use the <span 
class="cmtt-10">external </span>directive. The <span 
class="cmtt-10">external </span>directive replaces,
in effect, the code block of the function.
<!--l. 4387--><p class="noindent" >The external directive doesn&#8217;t specify a calling convention; it just tells the compiler that the
code for a procedure or function resides in an external code block. A calling convention
modifier should be declared if the external code blocks does not have the same calling
conventions as Free Pascal. For more information on calling conventions section <a 
href="progse22.html#x173-1760006.3">6.3<!--tex4ht:ref: se:CallingConventions --></a>, page
<a 
href="progse22.html#x173-1760006.3">396<!--tex4ht:ref: se:CallingConventions --></a>.
<!--l. 4394--><p class="noindent" >There exist four variants of the <span 
class="cmtt-10">external </span>directive:
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x186-189002x1">A simple external declaration:
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-183">
     Procedure&#x00A0;ProcName&#x00A0;(Args&#x00A0;:&#x00A0;TPRocArgs);&#x00A0;external;
</div>
     <!--l. 4399--><p class="nopar" >The <span 
class="cmtt-10">external </span>directive tells the compiler that the function resides in an external block of
     code. You can use this together with the <span 
class="cmsy-10">{</span><span 
class="cmtt-10">$L</span><span 
class="cmsy-10">} </span>or <span 
class="cmsy-10">{</span><span 
class="cmtt-10">$LinkLib</span><span 
class="cmsy-10">} </span>directives to link to a function
     or procedure in a library or external object file. Object files are looked for in the object
     search path (set by <span 
class="cmtt-10">-Fo</span>) and libraries are searched for in the linker path (set by
     <span 
class="cmtt-10">-Fl</span>).
     </li>
     <li 
  class="enumerate" id="x186-189004x2">You can give the <span 
class="cmtt-10">external </span>directive a library name as an argument:
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-184">
     Procedure&#x00A0;ProcName&#x00A0;(Args&#x00A0;:&#x00A0;TPRocArgs);&#x00A0;external&#x00A0;&#8217;Name&#8217;;
</div>
     <!--l. 4411--><p class="nopar" >This tells the compiler that the procedure resides in a library with name <span 
class="cmtt-10">&#8217;Name&#8217;</span>. This
     method is equivalent to the following:
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-185">
     Procedure&#x00A0;ProcName&#x00A0;(Args&#x00A0;:&#x00A0;TPRocArgs);external;
     &#x00A0;<br />{$LinkLib&#x00A0;&#8217;Name&#8217;}
</div>
     <!--l. 4417--><p class="nopar" >
     </li>
     <li 
  class="enumerate" id="x186-189006x3">The <span 
class="cmtt-10">external </span>can also be used with two arguments:
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-186">
     Procedure&#x00A0;ProcName&#x00A0;(Args&#x00A0;:&#x00A0;TPRocArgs);&#x00A0;external&#x00A0;&#8217;Name&#8217;
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;name&#x00A0;&#8217;OtherProcName&#8217;;
</div>
     <!--l. 4422--><p class="nopar" >This has the same meaning as the previous declaration, only the compiler will use the name
     <span 
class="cmtt-10">&#8217;OtherProcName&#8217; </span>when linking to the library. This can be used to give different names
     to procedures and functions in an external library. The name of the routine is
     case-sensitive and should match exactly the name of the routine in the object
     file.
     <!--l. 4429--><p class="noindent" >This method is equivalent to the following code:
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-187">
     Procedure&#x00A0;OtherProcName&#x00A0;(Args&#x00A0;:&#x00A0;TProcArgs);&#x00A0;external;
     &#x00A0;<br />{$LinkLib&#x00A0;&#8217;Name&#8217;}
     &#x00A0;<br />
     &#x00A0;<br />Procedure&#x00A0;ProcName&#x00A0;(Args&#x00A0;:&#x00A0;TPRocArgs);
     &#x00A0;<br />
     &#x00A0;<br />begin
     &#x00A0;<br />&#x00A0;&#x00A0;OtherProcName&#x00A0;(Args);
     &#x00A0;<br />end;
</div>
     <!--l. 4439--><p class="nopar" >
     </li>
     <li 
  class="enumerate" id="x186-189008x4">Lastly, under <span 
class="cmcsc-10">W<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">d</span><span 
class="small-caps">o</span><span 
class="small-caps">w</span><span 
class="small-caps">s</span> </span>and <span 
class="cmcsc-10"><span 
class="small-caps">o</span><span 
class="small-caps">s</span>/2</span>, there is a fourth possibility to specify an external
     function: In <span 
class="cmss-10">.DLL </span>files, functions also have a unique number (their index). It is possible to
     refer to these fuctions using their index:
                                                                            

                                                                            
     <div class="verbatim" id="verbatim-188">
     Procedure&#x00A0;ProcName&#x00A0;(Args&#x00A0;:&#x00A0;TPRocArgs);&#x00A0;external&#x00A0;&#8217;Name&#8217;
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Index&#x00A0;SomeIndex;
</div>
     <!--l. 4447--><p class="nopar" >This tells the compiler that the procedure <span 
class="cmtt-10">ProcName </span>resides in a dynamic link library, with
     index <span 
class="cmtt-10">SomeIndex</span>.
     <!--l. 4451--><p class="noindent" ><span 
class="cmbx-10">Remark:</span>Note that this is <span 
class="cmti-10">only </span>available under <span 
class="cmcsc-10">W<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">d</span><span 
class="small-caps">o</span><span 
class="small-caps">w</span><span 
class="small-caps">s</span> </span>and <span 
class="cmcsc-10"><span 
class="small-caps">o</span><span 
class="small-caps">s</span>/2</span>.
     </li></ol>
                                                                            

                                                                            
<!--l. 4457--><div class="crosslinks"><p class="noindent">[<a 
href="progsu148.html" >next</a>] [<a 
href="progsu147.html" >front</a>] [<a 
href="progse28.html#progsu147.html" >up</a>] </p></div>
<!--l. 4457--><p class="noindent" ><a 
 id="tailprogsu147.html"></a>  
</body></html> 
